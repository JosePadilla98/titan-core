---
import Logo from '@components/Logo.astro';
import Button from '@components/ui/Button.astro';
import { siteConfig } from '@data/config';
import { footerMenu } from '@data/menu';

interface ButtonProps {
    text: string;
    link: string;
    target?: string;
}

interface Props {
    footerCta?: {
        title?: string;
        description?: string;
        hideCta?: boolean;
        hideBtn?: boolean;
        button?: ButtonProps;
        postBtnDescription?: string | undefined;
    };
}

const { footerCta } = Astro.props;

const defaultCta = {
    title: '¬øQuieres dar el siguiente paso con Ampereon?',
    description: '',
    hideCta: false,
    hideBtn: false,
    button: {
        text: 'Solicitar asesoramiento',
        link: '/contact',
        target: '_self',
    },
    postBtnDescription:
        'Cu√©ntanos tu proyecto y te asesoraremos sin compromiso. Nuestro equipo t√©cnico analizar√° tu caso y te ofrecer√° la soluci√≥n el√©ctrica o fotovoltaica m√°s eficiente y segura.',
};

const cta = { ...defaultCta };
if (footerCta) {
    Object.keys(footerCta).forEach((key) => {
        const value = footerCta[key as keyof typeof footerCta];
        if (value !== undefined) {
            (cta as any)[key] = value;
        }
    });
}
const currentYear = new Date().getFullYear();
---

<footer class={`bg-black text-white pb-small ${cta.hideCta ? 'pt-large' : ''}`}>
    <div class="site-container mx-auto px-4">
        {
            !cta.hideCta && (
                <div class="text-center border-b border-background-light/50 mb-16 py-small pb-20 flex flex-col items-center gap-6">
                    <h2 class="text-3xl lg:text-4xl font-bold mb-6 text-white" data-aos="fade-up">
                        {cta.title}
                    </h2>

                    {cta.description !== '' ? (
                        <p
                            class="text-white/90 mb-8 max-w-3xl mx-auto text-lg leading-relaxed"
                            data-aos="fade-up"
                            data-aos-delay="100"
                        >
                            {cta.description}
                        </p>
                    ) : null}

                    {cta.hideBtn || !cta.button ? null : (
                        <div data-aos="fade-up" data-aos-delay="200">
                            <Button
                                href={cta.button.link}
                                variant="ghostLight"
                                size="lg"
                                class="group relative overflow-hidden"
                                {...(cta.button.target && { target: cta.button.target })}
                            >
                                <span class="relative z-10">{cta.button.text}</span>
                                <div class="absolute inset-0 bg-gradient-to-r from-primary/20 to-primary-light/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300" />
                            </Button>
                        </div>
                    )}

                    {cta.postBtnDescription && cta.postBtnDescription.length > 0 && (
                        <p
                            class="text-white/80 mt-8 max-w-2xl mx-auto text-base leading-relaxed"
                            data-aos="fade-up"
                            data-aos-delay="300"
                        >
                            {cta.postBtnDescription}
                        </p>
                    )}
                </div>
            )
        }

        <div class="grid grid-cols-1 md:grid-cols-4 gap-8 lg:gap-12 pb-12 border-b border-background-light/30">
            <div class="col-span-1 md:col-span-2 lg:col-span-1" data-aos="fade-up" data-aos-delay="100">
                <Logo variant="footer" useLogo blueFont />
                <p class="mt-4 text-white/80 leading-relaxed" data-aos="fade-up" data-aos-delay="200">
                    El valor de hacer las cosas bien.
                </p>
            </div>

            <div class="col-span-1" data-aos="fade-up" data-aos-delay="300">
                <nav>
                    <h3 class="text-white font-semibold mb-4 text-lg">Enlaces</h3>
                    <ul class="space-y-3">
                        {
                            footerMenu.map((item, index) => (
                                <li data-aos="fade-up" data-aos-delay={400 + index * 50}>
                                    <a
                                        href={item.link}
                                        class="text-body-dark hover:text-white transition-all duration-300 hover:translate-x-1 inline-block"
                                    >
                                        {item.name}
                                    </a>
                                </li>
                            ))
                        }
                    </ul>
                </nav>
            </div>

            <div class="col-span-1 md:col-span-4 lg:col-span-2" data-aos="fade-up" data-aos-delay="500">
                <div class="bg-white/5 rounded-2xl p-6 border border-white/10">
                    <h3 class="text-white font-semibold mb-3 text-lg" data-aos="fade-up" data-aos-delay="600">
                        ¬øNecesitas ayuda?
                    </h3>
                    <p class="text-white/80 text-sm leading-relaxed mb-4" data-aos="fade-up" data-aos-delay="700">
                        Nuestro equipo de expertos est√° listo para asesorarte en tu proyecto el√©ctrico o solar.
                    </p>
                    <div class="flex flex-col lg:flex-row gap-3" data-aos="fade-up" data-aos-delay="800">
                        <a
                            href={`tel:${siteConfig.Socials.Phone}`}
                            class="text-primary hover:text-primary/80 transition-colors font-medium text-sm"
                        >
                            üìû {siteConfig.Socials.Phone}
                        </a>
                        <a
                            href={`mailto:${siteConfig.Socials.Email}`}
                            class="text-primary hover:text-primary/80 transition-colors font-medium text-sm"
                        >
                            ‚úâÔ∏è {siteConfig.Socials.Email}
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="mt-6">
            <div class="flex flex-col lg:flex-row justify-between items-center gap-6">
                <div class="text-center lg:text-left leading-relaxed">
                    Instaladores el√©ctricos y solares en Sevilla, con soluciones a medida para cada cliente en toda
                    Andaluc√≠a.
                </div>
                <div class="flex flex-col sm:flex-row items-center gap-4 text-sm">
                    <div class="text-body-dark">
                        ¬© {currentYear}
                        {siteConfig.companyName}. All rights reserved.
                    </div>
                    <div class="flex items-center gap-2">
                        <span class="text-primary">‚ö°</span>
                        <span class="text-secondary">‚òÄÔ∏è</span>
                        <span class="text-white/50 text-xs">Powered by Excellence</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>
